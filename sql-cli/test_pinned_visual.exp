#!/usr/bin/expect -f
set timeout 5
spawn ./target/release/sql-cli test_pinned_visual.csv

# Wait for initial load
expect "rows" {
    sleep 0.5
}

# Pin the first column (id) - press 'p'
send "p"
sleep 0.5

# Move to the second column
send "\033\[C"
sleep 0.5

# Pin the second column (name) - press 'p'
send "p"
sleep 1

# Now we should see the blue background on pinned columns
# Take a screenshot or observe the output

# Move columns around to see if the blue background follows
send "\033\[D"
sleep 0.5

# Exit
send "q"
send "q"
expect eof